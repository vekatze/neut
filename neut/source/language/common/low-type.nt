import {
  this.language.common.data-size {data-size},
  this.language.common.prim-num-size {Int-Size-8, int-size-from-data-size},
  this.language.common.prim-type {Int, prim-type},
}

data low-type {
| Prim-Num(prim-type)
| Pointer
| Array(int, low-type)
| Struct(list(low-type))
| Function(list(low-type), low-type)
| Void
| VarArgs
}

define _text-type(len: int): low-type {
  Array(len, Prim-Num(Int(Int-Size-8)))
}

define text-type(base-size: data-size, len: int): low-type {
  Struct(List[
    Prim-Num(Int(int-size-from-data-size(base-size))),
    Prim-Num(Int(int-size-from-data-size(base-size))),
    _text-type(len),
  ])
}
