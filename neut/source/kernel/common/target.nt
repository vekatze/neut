import {
  this.kernel.common.clang-option {Clang-Option, clang-option},
  this.language.common.base-name {base-name, main-name, zen-name},
  this.language.common.source-locator {source-locator},
}

data target-summary {
| Target-Summary(
    entry-point: source-locator,
    clang-option: clang-option,
  )
}

data main-target {
| Named(target-name: text, target-info: target-summary)
| Zen(file-path: text, option: clang-option)
}

data target {
| Main(main-target)
| Peripheral
| Peripheral-Single(file-path: text)
}

define empty-zen(path: text): main-target {
  Zen(path, Clang-Option of {compile-option := List[], link-option := List[]})
}

define get-entry-point-name(t: &main-target): base-name {
  case t {
  | Named of {} =>
    main-name
  | Zen of {} =>
    zen-name
  }
}
