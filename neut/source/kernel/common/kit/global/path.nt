import {
  core.cell {make-cell},
  path.path {split-extension, take-last},
  this.kernel.common.kit.global.platform {platform-kit},
  this.kernel.common.module {main-module},
  this.logger.logger-kit {logger-kit},
}

data path-kit {
| _Path-Kit(
    main-module: &main-module,
    cache-cell: cell(?text),
    logger-kit: &logger-kit,
    platform-kit: &platform-kit,
  )
}

define make-path-kit(mm: &main-module, lk: &logger-kit, pk: &platform-kit): path-kit {
  let cache-cell = make-cell(box {none});
  _Path-Kit(mm, cache-cell, lk, pk)
}

define get-base-name(path: &text): text {
  pin bar = take-last(path);
  let Pair(buz, _) = split-extension(bar);
  buz
}

define zen(): unit {
  pin x = get-base-name("foo/bar/buz.nt");
  vet(x);
}
